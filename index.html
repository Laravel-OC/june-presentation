<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Learning Laravel</title>
        <meta name="description" content="learning Laravel on the internet">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- deck.js has a lot of dependencies -->
        <link rel="stylesheet" media="screen" href="css/dist.css">
    </head>
    <body>

        <div class="deck-container">

                            <article class="slide"><h1>Why we use <strong>Laravel</strong></h1></article>
            <article class="slide"><h1>Or, why we never want to write another database access class</h1></article>
            <article class="slide"><h1>Who are we?</h1></article>
            <article class="slide"><h2>Ciaran Downey</h2>
<ul>
<li>PHP developer for over 3 years</li>
<li>Open source advocate</li>
<li>Likes the sound of his own voice</li>
</ul></article>
            <article class="slide"><h2>Justin Page</h2>
<ul>
<li>PHP Developer for over 2 years -respect the double claw</li>
<li>Loves mechanical keyboards</li>
<li>KLVTZ: Kangaroo League on a Vendetta for Terrifying Zebras?</li>
</ul></article>
            <article class="slide"><h2>Today we're going to talk about...</h2>
<ul>
<li>The history of Laravel</li>
<li>How to do some common tasks in Laravel</li>
<li>How to do those tasks without Laravel</li>
<li>Pitfalls for either approach</li>
<li>Next steps in Laravel</li>
</ul></article>
            <article class="slide"><h1>Let's get started</h1></article>
            <article class="slide"><h1>But first, a bit of history</h1></article>
            <article class="slide"><h2>Laravel 4: A PHP Framework for Web Artisans</h2>
<ul>
<li>Developed by Taylor Otwell</li>
<li>Started in April 2011</li>
<li>Over 1.57 million downloads from <a href="https://packagist.org/packages/laravel/framework">Packagist</a> (so far)</li>
<li>Combines the very best features of other web frameworks and languages
<ul>
<li>Rails, ASP.NET, Sinatra, Symfony</li>
</ul></li>
<li>Red Panda: the official, unofficial mascot</li>
</ul></article>
            <article class="slide"><h1>Okay, enough history <br> what about the features?!</h1></article>
            <article class="slide"><h1>SQL and database access</h1></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">// connections
$connections = [
    "mysql" =&gt; [
        "driver"    =&gt; "mysql",
        "host"      =&gt; "localhost",
        "database"  =&gt; $dbname,
        "username"  =&gt; $dbuser,
        "password"  =&gt; $dbpass,
        "charset"   =&gt; "utf8",
        "collation" =&gt; "utf8_unicode_ci",
        "prefix"    =&gt; "",
    ],
];</code></pre></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">$query = DB::table("developers")
    -&gt;select("*")
    -&gt;where("projects.due_date", "&lt;", ":due_date")
    -&gt;whereNull("completed_at")
    -&gt;orderBy("projects.due_date", "ASC");

// bind any params
$query-&gt;setBindings(
    [":due_date" =&gt; "2015-01-01 00:00:00"]
);

$query-&gt;get();</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">$dsn = "{$dbtype}:dbname={$dbname};host={$host}";

$conn = new PDO($dsn, $dbuser, $dbpass);

//TODO: set charset, collation, table prefixes</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">$query = &lt;&lt;&lt;QUERY
    SELECT *
    FROM developers
    WHERE due_date &lt; ":due_date"
    AND WHERE completed_at IS NULL
    ORDER BY due_date ASC;
QUERY;

$conn-&gt;prepare($query)-&gt;execute(
    [":due_date" =&gt; "2015-01-01 00:00:00"]
);

do_something_with_these_errors($prep-&gt;errorInfo());</code></pre></article>
            <article class="slide"><h2>Problems with the vanilla way</h2>
<ul>
<li>Hard to pass around the PDO connection</li>
<li>Hard to mock the PDO connection in tests</li>
<li>Hard to switch database systems</li>
<li>
<p>Did anyone notice the SQL issue?</p>
<pre><code class="language-sql">-- double quotes are MySQL specific
WHERE due_date &lt; ":due_date"</code></pre>
</li>
<li>Hard to change DB table prefixes</li>
<li>Remember to check <code>errorInfo</code> every time</li>
</ul></article>
            <article class="slide"><h1>SQL joins</h1></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">DB::table('developers')
    // select these columns
    -&gt;select('developers.first_name', 'projects.project_name')
    // LEFT JOIN projects ON developers.id = projects.developer_id
    -&gt;join('projects', 'developers.id', '=', 'projects.developer_id')
    // add any number of conditions
    -&gt;where('projects.due_date', '&lt;', $due_date)
    -&gt;whereNull('projects.completed_at')
    // arbritrary clauses
    -&gt;orderBy('projects.due_date', 'ASC')
    // limit by X
    -&gt;take($limit)
    // perform the query
    -&gt;get();</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">$query = &lt;&lt;&lt;QUERY
    SELECT first_name, project_name
    FROM developers
    INNER JOIN projects
        ON developers.id = developer_id
    WHERE due_date &lt; ':due_date'
    ORDER BY due_date ASC
    LIMIT :limit
QUERY;

$conn-&gt;prepare($query)-&gt;execute(
    [":due_date" =&gt; $due_date, ":limit" =&gt; $limit]
);

do_something_with_these_errors($prep-&gt;errorInfo());</code></pre></article>
            <article class="slide"><h1>Retrieving records from a database</h1></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">class User extends Eloquent
{
    // don't need to add anything here
}</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">// grabbing all the users:
$all_users = User::all();

// grabbing the user with pk = 3
$user_no_3 = User::find(3);</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">// grabbing the first 10 teenage users
// organized by age (old -&gt; young)
$teenagers = User::whereBetween("age", [13, 19])
    -&gt;orderBy("age", "desc")
    -&gt;take(10)
    -&gt;get();</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">$user = new User();

$user-&gt;first_name = "Ciaran";
$user-&gt;last_name  = "Downey";
$user-&gt;profession = "Developer";

try {
    $primary_key = $user-&gt;save()
} catch (Exception $e) {
    Log::error($e-&gt;getMessage());

    throw $e;
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">class BaseRepo
{
    private $conn;

    public function __construct(PDO $conn) {
        $this-&gt;conn = $conn;
    }

    // continued</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">    public function fetchByQuery($query)
    {
        $stmt = $this-&gt;conn-&gt;prepare($query);

        $stmt-&gt;execute();

        return $stmt-&gt;fetch();
    }
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">class UserRepo extends BaseRepo {

    public function findByPk($key) {
        $safe_key = intval($key);

        return $this-&gt;fetchByQuery(
            "SELECT * FROM users
              WHERE id = {$safe_key}"
        );
    }</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">    // continued
    public function findAll()
    {
        return $this-&gt;fetchByQuery(
            "SELECT * FROM users"
        );
    }
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">$repo = new UserRepo($db_from_somewhere);

// grab all the users
$all_users = $repo-&gt;findAll();

// grabbing the user with pk = 3
$user_no_3 = $repo-&gt;findByPk(3);</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">// grabbing the first 10 teenage users
// organized by age (old -&gt; young)
$teenagers = $repo-&gt;fetchByQuery(
    "SELECT * FROM users
        WHERE age BETWEEN 13 AND 19
        ORDER BY age DESC LIMIT 10"
);</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">$user = [
    "first_name" =&gt; "Justin",
    "last_name"  =&gt; "Page",
    "profession" =&gt; "Developer",
];

$query = &lt;&lt;&lt;QUERY
    INSERT INTO users
        (first_name, last_name, profession)
    VALUES
        (':first', ':last', ':profession')
QUERY;</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">/*

now we just need to add:

 - validation
 - param binding
 - nice error messages
 - data transformation before / after save

*/</code></pre></article>
            <article class="slide"><h1><img alt="nope" src="./img/nope.gif" /></h1></article>
            <article class="slide"><h2>Other benefits Laravel provides</h2>
<ul>
    <li class="slide">
        <h5>
            SQL injection protection
        </h5>
    </li>
    <li class="slide">
        <h5>
            Saved scopes (saved conditions that can be stacked)
        </h5>
    </li>
    <li class="slide">
        <h5>
            Chunking (load X records into memory at a time)
        </h5>
    </li>
    <li class="slide">
        <h5>
            Seamless interop between different DB engines
        </h5>
    </li>
    <li class="slide">
        <h5>Different data types</h5>
        <ul>
            <li><code>datetime</code>s as Date objects</li>
            <li><code>mutators</code> and <code>accessors</code></li>
        </ul>
    </li>
</ul>


</article>
            <article class="slide"><h1>Autoloading</h1></article>
            <article class="slide"><h2>The Laravel way</h2>
<p>Use composer</p></article>
            <article class="slide"><h2>The Composer way</h2>
<pre><code class="language-javascript">{
    "require": {
        "laravel/framework": "~4.2.3"
    },
    "autoload": {
        "psr-4": {"MyNamespace\\": "src/"}
    },
    "config": { "preferred-install": "dist" },
    "minimum-stability": "stable"
}</code></pre></article>
            <article class="slide"><h2>The Composer way (cont'd)</h2>
<pre><code class="language-php">&lt;?php // entry file

require __DIR__ . "/vendor/autoload.php";</code></pre></article>
            <article class="slide"><h2>The Composer way (cont'd)</h2>
<pre><code class="language-php">// as long as the autoload file has been included
// before, we don't have to specify anything else

$cat = new MyNamespace\Model\Cat();

$hat = new MyNamespace\Fashion\Hat();

$cat-&gt;moveInside($hat);</code></pre></article>
            <article class="slide"><h2>The Old way</h2>
<pre><code class="language-php">// ever seen something like this?
require "../inc/libs/_globals/bootstrap_NEW.php";

// or this?
foreach ($required_files as $file) {
    require $file;
}

// or this?
foreach (glob("../lib/*.php") as $file) {
    require $file;
}</code></pre></article>
            <article class="slide"><h1>PUBLIC SERVICE ANNOUNCEMENT</h1></article>
            <article class="slide"><h1>USE COMPOSER</h1></article>
            <article class="slide"><h1>Basic routing</h1></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">Route::get('/blog', function() {
    // do blog stuff
});

// or

Route::get("/blog", "BlogController@showBlog");</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">// different request methods

Route::get("/blog/post/{id}", function ($id) {
    // show that post
});

Route::delete("/blog/post/{id}", function ($id) {
    // delete that post
});</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-bash">+-- about
   |   +-- index.php
   +-- blog
       +-- index.php
       +-- post
           +-- index.php</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">switch (strtoupper($_SERVER["REQUEST_METHOD")) {
    "GET":
        // show the post
        break;
    "DELETE":
        // do delete stuff
        break;
    default:
        // show a 404
}</code></pre></article>
            <article class="slide"><h1>CSRF tokens</h1></article>
            <article class="slide"><blockquote>
<p>CSRF is an attack which forces an end user to execute unwanted actions on a web
application in which he/she is currently authenticated</p>
<p>&mdash; <a href="https://www.owasp.org/index.php/CSRF">owasp.org</a></p>
</blockquote></article>
            <article class="slide"><h1>Does everyone know what CSRF is?</h1></article>
            <article class="slide"><h1>And you're all protecting yourselves correctly, right?</h1></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">&lt;input type="hidden"
    name="_token"
    value="&lt;?php echo csrf_token(); ?&gt;"&gt;</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">Route::post('register', [
    // filters to apply
    'before' =&gt; 'csrf',
    function() {
        return 'You gave a valid CSRF token!';
    }
]);

// Or
Route::post('register',
    ["before" =&gt; "csrf", "Controller@register"]
);</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">// generates the csrf token
function csrf_token()
{
    if (session_status() !== PHP_SESSION_ACTIVE) {
        session_start();
    }

    $_SESSION["token"] =
        md5(uniqid(mt_rand(), true)));

    return ($_SESSION["_token"]);
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">&lt;input type="hidden"
    name="_token"
    value="&lt;?php echo csrf_token(); ?&gt;"&gt;</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">function check_token()
{
    if (session_status() !== PHP_SESSION_ACTIVE) {
        session_start();
    }

    // works with both POST and GET
    $req = count($_POST) ? $_POST : $_GET;

    return isset($req["_token"])
        &amp;&amp; $req["_token"] !== $_SESSION["_token"];
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">// now just call that in every file you need it
if (check_token()) {
    show_error_page_or_whatever_we_do();
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">// except...

// remember this line?
$_SESSION["token"] =
    md5(uniqid(mt_rand(), true)));

// are you sure that's secure?</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">// Here's what Laravel does
$random = 'openssl_random_pseudo_bytes';
if (function_exists($random)) {
    $bytes  = $random($length * 2);
    $base64 = base64_encode($bytes);

    return substr(
        str_replace(['/', '+', '='], '', $base64),
        0,
        $length
    );
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">// or if we don't have openssl_random_pseudo_bytes
} else {
    $pool = '0123456789'
        . 'abcdefghipqrstuvwxyz'
        . 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

    return substr(
        str_shuffle(str_repeat($pool, 5)),
        0,
        $length
    );
}</code></pre></article>
            <article class="slide"><h2>Questions for the audience</h2>
<ul>
<li>
<p>How many of you have written functions like this?</p>
</li>
<li>
<p>Who can tell us what these parameters mean?</p>
</li>
<li>How much do you trust your implementation?</li>
</ul></article>
            <article class="slide"><blockquote>
<p>Anyone, from the most clueless amateur to the best cryptographer, can create an
algorithm that he himself can't break.</p>
<p>&mdash; <cite><a href="https://www.schneier.com/blog/archives/2011/04/schneiers_law.html">Bruce Schneier</a></cite></p>
</blockquote></article>
            <article class="slide"><h1>Comparing dates</h1></article>
            <article class="slide"><h2>The Carbon way</h2>
<pre><code class="language-php">// Carbon comes included with Laravel
use Carbon\Carbon;

Carbon::now()-&gt;diffForHumans(
    Carbon::parse("July 4th, 2014")
);
// =&gt; "1 week before"

// other cool things
Carbon::yesterday();
Carbon::now()-&gt;isWeekend();
Carbon::now()-&gt;subWeekdays(5);</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">die("nope.gif");</code></pre>
<p><img alt="nope.gif" src="./img/nope_jack.gif" /></p></article>
            <article class="slide"><h1>Templating</h1></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">&lt;html lang='en'&gt;&lt;!-- app/views/master.php --&gt;
&lt;head&gt;
    &lt;title&gt;&lt;?= Section::yield("title") ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;?= Section::yield("content") ?&gt;
    &lt;/div&gt;
    &lt;?php if ($projects): ?&gt;
        &lt;?= Section::yield("js") ?&gt;
    &lt;?php endif; ?&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">&lt;?php include __DIR__ . "/../master.php";
// include the master template

// start a new section called "content"
Section::startSection("content"); ?&gt;

Nothing magic here! Everything gets rendered in
the master template above. You get access to all
the things you'd normally have access to. See?

The year is: &lt;?= date("Y") ?&gt;

&lt;?php // and just stop the section when you're done
Section::stopSection("content");</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">&lt;html lang='en'&gt;&lt;!-- app/views/master.php --&gt;
&lt;head&gt;
    &lt;title&gt;&lt;?= $title ?&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;?= $content ?&gt;
    &lt;/div&gt;
    &lt;?php if ($projects): ?&gt;
        &lt;?= $js ?&gt;
    &lt;?php endif; ?&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">&lt;?php /* start output buffering */ ob_start(); ?&gt;
Nothing magic here! Everything gets rendered in
the master template above. You get access to all
the things you'd normally have access to. See?

The year is: &lt;?= date("Y") ?&gt;

&lt;?php

$content  = ob_get_clean();
$title    = "My Cool Title";
$projects = [];

include __DIR__ . "/../master.php";</code></pre></article>
            <article class="slide"><h2>Problems with the vanilla way</h2>
<ul>
<li>End up mixing business login and display logic</li>
<li>View files get very, very busy</li>
<li>Hard to change variable names</li>
<li>Multiple sections get unwieldy quickly</li>
<li>Have to remember to <code>ob_start()</code> at the top of each section
<ul>
<li>If you don't you'll get hard-to-debug problems</li>
</ul></li>
<li>Doing stuff like conditionally adding a stylesheet to the <code>&lt;head&gt;</code> tag is
really hard</li>
</ul></article>
            <article class="slide"><h2>Other benefits Laravel provides</h2>
<ul>
    <li class="slide">
        <h5>
            View composers
        </h5>
        <ul><li>always include certain variables with certain views</li></ul>
    </li>
    <li class="slide">
        <h5>
            Automatic HTML escaping
        </h5>
        <ul><li><em>Some</em> XSS protection</li></ul>
    </li>
    <li class="slide">
        <h5>
            Subviews and view-level variable isolation
        </h5>
    </li>
    <li class="slide">
        <h5>
            View chains with optional overwrites or appends
        </h5>
    </li>
</ul>
</article>
            <article class="slide"><h1>Migrations</h1></article>
            <article class="slide"><h2>Getting started</h2>
<ul>
<li>Setup your default database connection just like before</li>
<li>Install migration table to keep track of migrations
<ul>
<li>Use <code>./artisan migrate:install</code></li>
</ul></li>
<li>Create a migration for a project table
<ul>
<li>Use <code>./artisan migrate:make create_projects_table</code></li>
<li>Generates all migrations in <code>app/database/migrations</code></li>
</ul></li>
<li>Organized by times stamp and migration action
<ul>
<li>e.g. <code>2014_06_23_073419_create_developers_table.php</code></li>
</ul></li>
</ul></article>
            <article class="slide"><h2>What goes up&hellip;</h2>
<pre><code class="language-php">public function up()
{
    // create a "projects" table and apply these features
    Schema::create('projects', function(Blueprint $table) {
        // primary key named 'id'
        $table-&gt;increments('id');
        // a unique string named 'project_name'
        $table-&gt;string('project_name')-&gt;unique;
        $table-&gt;string('developer_id');

        $table-&gt;dateTime('due_date');
        $table-&gt;dateTime('completed_at')-&gt;nullable();
        // "created_at" and "updated_at" columns
        $table-&gt;timestamps();
    });
}</code></pre></article>
            <article class="slide"><h2>&hellip;must come down</h2>
<pre><code class="language-php">public function down()
{
    // drop the table
    Schema::drop('projects');
}</code></pre></article>
            <article class="slide"><h2>More options</h2>
<ul>
<li>Rollback the last migration
<ul>
<li>Using <code>./artisan migrate:migrate</code></li>
</ul></li>
<li>Reset the entire database by rolling everything back
<ul>
<li><code>./artisan migrate:reset</code></li>
</ul></li>
<li>Add a <code>due_date</code> column to a projects table:
<pre><code class="language-bash">./artisan migrate:make \
    `# the name of the migration` \
    add_due_dates_to_projects_table \
    `# the table to generate a migration for` \
    --table=projects</code></pre></li>
</ul></article>
            <article class="slide"><h2>Benefits of Migrations</h2>
<ul>
    <li class="slide">
        <h5>
           Version control your database
        </h5>
    </li>
    <li class="slide">
        <h5>
           Freedom to add and remove columns while maintaining control
        </h5>
    </li>
    <li class="slide">
        <h5>
           Smooth transition to production environment
        </h5>
    </li>
    <li class="slide">
        <h5>
           Portable and transparent
        </h5>
    </li>
    <li class="slide">
        <h5>
            Automatic database seeding
        </h5>
    </li>
</ul>
</article>
            <article class="slide"><h1>Simple CRUD using REST</h1></article>
            <article class="slide"><h2>Why REST?</h2>
<ul>
    <li class="slide">
        <h5>
            Clean your URI request into clean and understandable elements
        </h5>
    </li>
    <li class="slide">
        <h5>
            Allows you to create, read, update, and delete data
        </h5>
    </li>
    <li class="slide">
        <h5>
            CRUD is used within REST to persist the database in response
        </h5>
    </li>
</ul>
</article>
            <article class="slide"><h2>Register a route resource</h2>
<pre><code class="language-php">Route::resource('developers', 'DevelopersController');</code></pre>
<ul>
<li>Wait, what resources?</li>
</ul>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Path</th>
<th>Action</th>
<th>Route Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/resource</td>
<td>index</td>
<td>resource.index</td>
</tr>
<tr>
<td>GET</td>
<td>/resource/create</td>
<td>create</td>
<td>resource.create</td>
</tr>
<tr>
<td>POST</td>
<td>/resource</td>
<td>store</td>
<td>resource.store</td>
</tr>
<tr>
<td>GET</td>
<td>/resource/{resource}</td>
<td>show</td>
<td>resource.show</td>
</tr>
<tr>
<td>GET</td>
<td>/resource/{resource}/edit</td>
<td>edit</td>
<td>resource.edit</td>
</tr>
<tr>
<td>PUT/PATCH</td>
<td>/resource/{resource}</td>
<td>update</td>
<td>resource.update</td>
</tr>
<tr>
<td>DELETE</td>
<td>/resource/{resource}</td>
<td>destroy</td>
<td>resource.destroy</td>
</tr>
</tbody>
</table></article>
            <article class="slide"><h1>So what does that mean?</h1></article>
            <article class="slide"><pre><code class="language-php">class DevelopersController
{
    // show an index page for this resource
    public function index();
    // show a create form for this resource
    public function create();
    // store a resource
    public function store();
    // show the requested resource
    public function show($id);
    // show an edit form for the requested resource
    public function edit($id);
    // update the requested resource
    public function update($id);
    // delete the requested resource
    public function destroy($id);
}</code></pre></article>
            <article class="slide"><h2>Display a listing of the developers</h2>
<pre><code class="language-php">public function index()
{
    $devs = Developer::all();

    return View::make('developers.index', ["devs" =&gt; $devs]);
}</code></pre></article>
            <article class="slide"><h2>Show form for creating a new developer</h2>
<pre><code class="language-php">public function index()
{
    $devs = Developer::all();

    return View::make('developers.index', ["devs" =&gt; $devs]);
}</code></pre></article>
            <article class="slide"><h2>Store a newly created developer in storage</h2>
<pre><code class="language-php">public function store()
{
    $dev = new developer;

    $dev-&gt;first_name = input::only("first_name");
    $dev-&gt;last_name  = input::only("last_name");

    $dev-&gt;save();

    return redirect::route('developers.index');
}</code></pre></article>
            <article class="slide"><h2>You may want to take advantage of mass assignment</h2>
<pre><code class="language-php">public function store()
{
    Developer::create(Input::all());

    return redirect::route('developers.index');
}</code></pre>
<p>Guard against mass assignment vulnerability with a whitelist</p>
<pre><code class="language-php">class Developer extends Eloquent
{
    protected $fillable = ['first_name', 'last_name'];
}</code></pre></article>
            <article class="slide"><h2>Display the specified developer</h2>
<pre><code class="language-php">public function show($id)
{
    $dev = Developer::findOrFail($id);

    return View::make('developers.show', ['dev' =&gt; $dev]);
}</code></pre></article>
            <article class="slide"><h2>Show the form for editing a developer</h2>
<pre><code class="language-php">public function edit($id)
{
    $dev = Developer::findOrFail($id);

    return View::make('developers.edit', ["dev" =&gt; $dev]);
}</code></pre></article>
            <article class="slide"><h2>Use form-model binding</h2>
<pre><code class="language-php">&lt;?= Form::model($dev,
    ["method" =&gt; "PATCH", "route" =&gt; "developers.update", $dev-&gt;id]
) ?&gt;
    &lt;div&gt;
        &lt;?= Form::label('first_name', 'First Name:') ?&gt;
        &lt;?= Form::text('first_name') ?&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;?= Form::label('last_name', 'Last Name:') ?&gt;
        &lt;?= Form::text('last_name') ?&gt;
    &lt;/div&gt;
    &lt;div&gt;&lt;?= Form::submit('Update Developer') ?&gt;&lt;/div&gt;
&lt;?= Form::close() ?&gt;</code></pre></article>
            <article class="slide"><h2>Update the specified resource in storage</h2>
<pre><code class="language-php">public function update($id)
{
    $dev = Developer::findOrFail($id);

    $dev-&gt;fill(Input::all());

    $dev-&gt;save();

    return Redirect::route('developers.show', ['id' =&gt; $id]);
}</code></pre></article>
            <article class="slide"><h2>Remove specified resource from storage</h2>
<pre><code class="language-php">public function destroy($id)
{
    $dev = Developer::findOrFail($id);

    $dev-&gt;delete();

    return Redirect::route('developers.index');
}</code></pre></article>
            <article class="slide"><h2>Different ways to redirect</h2>
<pre><code class="language-php">// Redirect to a route
return Redirect::to('developer/login');

// Redirect to a named route
return Redirect::to('login');

// Redirect to a Controller action
return Redirect::action('DevelopersController@index');</code></pre></article>
            <article class="slide"><h1>Authentication</h1></article>
            <article class="slide"><h2>Authentication and Laravel</h2>
<ul>
    <li class="slide">
        <h5>
            Authentication is essential in many modern apps
        </h5>
    </li>
    <li class="slide">
        <h5>
            The Auth facade makes authentication and session management easy
        </h5>
    </li>
    <li class="slide">
        <h5>
            Treated like a natural citizen in your app
        </h5>
    </li>
</ul>
</article>
            <article class="slide"><h2>Database Seeder</h2>
<pre><code class="language-php">class DeveloperTableSeeder extends Seeder
{
    public function run()
    {
        Developer::truncate();

        Developer::create([
            'email'      =&gt; 'ciaran@ciarandowney.com',
            'username'   =&gt; 'ciarand',
            'password'   =&gt; Hash::make('1234'),
        ]);
    }
}</code></pre></article>
            <article class="slide"><h2>Register a Login and Logout</h2>
<pre><code class="language-php">Route::get('login', 'SessionsController@create');
Route::get('logout', 'SessionsController@destroy');

Route::resource('sessions', 'SessionsController');

// we don't want just anyone to access this
Route::get('projects', function() {
    return 'List of Super Secret Projects';
    // so we run the auth filter before showing it to anyone
})-&gt;before('auth');</code></pre></article>
            <article class="slide"><h2>Authentication Filter</h2>
<pre><code class="language-php">Route::filter('auth', function() {
    if (Auth::guest()) {
        // sneaky sneaky
        return Redirect::guest('login');
    }
});</code></pre></article>
            <article class="slide"><h2>Login a user</h2>
<pre><code class="language-php">public function create()
{
    if (Auth::check()) {
        return Redirect::to('/projects');
    }

    return View::make('developers.login');
}</code></pre></article>
            <article class="slide"><pre><code class="language-php">public function store()
{
    if (Auth::attempt(Input::only('email', 'password'))) {
        return "Get to work, " . Auth::user()-&gt;username . "!";
    }

    return Redirect::back()
        -&gt;with('message', 'Invalid credentials')
        -&gt;withInput();
}</code></pre></article>
            <article class="slide"><h2>Logout the user</h2>
<pre><code class="language-php">public function destroy()
{
    Auth::logout();

    return Redirect::home()-&gt;with('message', 'Logged out');
}</code></pre></article>
            <article class="slide"><h2>Authentication Facade</h2>
<ul>
    <li class="slide">
        <h5>
            Auth offers an easy an natural way to authenticate the user
        </h5>
    </li>
    <li class="slide">
        <h5>
            You don't have to concern yourself with writing an authentication
            module
        </h5>
    </li>
    <li class="slide">
        <h5>
            Authentication module uses the most up-to-date current hashing
            practices
        </h5>
    </li>
</ul>
</article>
            <article class="slide"><h1>The IoC Container and Dependency Injection</h1></article>
            <article class="slide"><h2>Inversion of Control</h2>
<ul>
    <li class="slide">
        <h5>
            A powerful tool for managing class dependencies.
        </h5>
    </li>
    <li class="slide">
        <h5>
            Defines how our application should implement a class or interface.
        </h5>
    </li>
    <li class="slide">
        <h5>
            Simply a convenience mechanism for achieving dependency injection
        </h5>
    </li>
</ul>
</article>
            <article class="slide"><blockquote>
<p>Dependency Injection" is a 25-dollar term for a 5-cent concept. [...]
Dependency injection means giving an object its instance variables. [...].</p>
<p>&mdash; <cite><a href="http://martinfowler.com/articles/injection.html">Martin Fowler</a></cite></p>
</blockquote></article>
            <article class="slide"><h2>Problem</h2>
<pre><code class="language-php">class DevelopersController extends \BaseController {

public function index()
{
    $developers = Developer::all();
    return View::make('developers.index', compact('developers'));
}</code></pre>
<ul>
<li>Concise, but unable to test without hitting the database.</li>
<li>Eloquent ORM is tightly couple to our controller.</li>
<li>violates single responsibility.</li>
<li>Think of a monitor and cable line.</li>
</ul></article>
            <article class="slide"><h2>Inversion of Control Container</h2>
<pre><code class="language-php">interface DeveloperRepositoryInterface
{
    public function all();
}

class DBDeveloperRepository implements DeveloperRepositoryInterface
{
    protected function all()
    {
        return Developer::all();
    }
}</code></pre></article>
            <article class="slide"><h2>Dependency Injection</h2>
<p>class DevelopersController extends \BaseController {</p>
<pre><code>protected $developers;

public function __construct(DeveloperRepositoryInterface $developers)
{
    $this-&gt;developers = $developers;
}

public function index()
{
    $developers = $this-&gt;developers-&gt;all();
    return View::make('developers.index', compact('developers'));
}</code></pre>
<p>}</p></article>
            <article class="slide"><h2>Binding our Dependencies</h2>
<pre><code class="language-php">App::bind('OC\Repositories\DeveloperRepositoryInterface',
    'OC\Repositories\DBDeveloperRepository');

// Sometimes you may wish to resolve only one instance of a given class
// throughout your entire application.

App::singleton('OC\Repositories\DeveloperRepositoryInterface',
'OC\Repositories\DBDeveloperRepository');

// Or you may wish to pass through an already existing instance
App::singleton('OC\Repositories\DeveloperRepositoryInterface', $developer);</code></pre></article>
            <article class="slide"><h2>Benefits</h2>
<ul>
    <li class="slide">
        <h5>
          We can change implementation at will without effecting other portions
          of our application
        </h5>
    </li>
    <li class="slide">
        <h5>
          Encourages polymorphism: an interface can have multiple
          implementations.
        </h5>
    </li>
    <li class="slide">
        <h5>
          Testable and can be mocked
        </h5>
    </li>
</ul>
</article>
            <article class="slide"><h1><img alt="lost.gif" src="./img/lost.gif" /></h1></article>
            <article class="slide"><h1>Interested in learning more?</h1></article>
            <article class="slide"><h1>Have some links!</h1></article>
            <article class="slide"><h2>The official documentation</h2>
<ul>
<li><a href="http://laravel.com/docs">Laravel docs</a></li>
<li><a href="http://laravel.io/forum">Laravel forums</a></li>
<li><a href="https://github.com/laravel/laravel">Laravel GitHub</a></li>
<li><a href="https://leanpub.com/laravel">Laravel book</a></li>
</ul></article>
            <article class="slide"><h2>Laracasts (semi-official)</h2>
<ul>
<li><a href="https://laracasts.com/">Homepage</a></li>
<li><a href="https://laracasts.com/lessons/you-must-use-composer">"You Must Use Composer"</a></li>
<li><a href="https://laracasts.com/lessons/laravel-installation-for-newbs">"Laravel Installation For Newbs"</a></li>
<li><a href="https://laracasts.com/lessons/namespacing-primer">"Namespace Primer"</a></li>
</ul></article>
            <article class="slide"><h2>Code Bright (by Dayle Rees)</h2>
<ul>
<li>Written by one of the most prominent members of the community</li>
<li>Written for beginners to Laravel and frameworks</li>
<li>Conversational style makes it a really easy read</li>
<li><a href="http://daylerees.com/codebright">Samples</a> available!</li>
<li><a href="https://leanpub.com/codebright">Available for purchase on LeanPub for $29.99</a></li>
</ul></article>
            <article class="slide"><h1>Wait, you're going too fast!</h1></article>
            <article class="slide"><h1>Don't worry!</h1></article>
            <article class="slide"><h1>We're on GitHub!</h1></article>
            <article class="slide"><h2>Links</h2>
<ul>
<li>This presentation: <a href="http://laravel-oc.github.io/june-presentation">laravel-oc.github.io/june-presentation</a></li>
<li>This presentation source code: <a href="http://github.com/Laravel-OC/june-presentation">github.com/Laravel-OC/june-presentation</a></li>
<li>Justin on GitHub: <a href="http://github.com/KLVTZ">github.com/KLVTZ</a></li>
<li>Ciaran on GitHub: <a href="http://github.com/ciarand">github.com/ciarand</a></li>
</ul></article>
    
            <p class="deck-status" aria-role="status">
                <span class="deck-status-current"></span>
                /
                <span class="deck-status-total"></span>
            </p>
        </div>

        <script src="js/dist.js"></script>
    </body>
</html>
