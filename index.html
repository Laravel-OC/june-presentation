<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Learning Laravel</title>
        <meta name="description" content="learning Laravel on the internet">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- deck.js has a lot of dependencies -->
        <link rel="stylesheet" media="screen" href="css/dist.css">
    </head>
    <body>

        <div class="deck-container">

                            <article class="slide"><h1>Why we use Laravel</h1></article>
            <article class="slide"><h1>Or, why we never want to write another database access class</h1></article>
            <article class="slide"><h1>Who are we?</h1></article>
            <article class="slide"><h2>Benjamin Walters</h2>
<ul>
<li>Developer</li>
<li>TODO</li>
<li>TODO</li>
</ul></article>
            <article class="slide"><h2>Ciaran Downey</h2>
<ul>
<li>PHP developer for over 3 years</li>
<li>Open source advocate</li>
<li>Likes the sound of his own voice</li>
</ul></article>
            <article class="slide"><h2>Justin Page</h2>
<ul>
<li>Developer</li>
<li>TODO</li>
<li>TODO</li>
</ul></article>
            <article class="slide"><h2>Today we're going to talk about...</h2>
<ul>
<li>How to do some common tasks in Laravel</li>
<li>How to do those tasks without Laravel</li>
<li>Pitfalls for either approach</li>
</ul></article>
            <article class="slide"><h1>Let's get started</h1></article>
            <article class="slide"><h2>Retrieving records from a database</h2></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">class User extends Eloquent
{
    // don't need to add anything here
}</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">// grabbing all the users:
$all_users = User::all();

// grabbing the user with pk = 3
$user_no_3 = User::find(3);</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">// grabbing the first 10 teenage users
// organized by age (old -&gt; young)
$teenagers = User::whereBetween("age", [13, 19])
    -&gt;orderBy("age", "desc")
    -&gt;take(10)
    -&gt;get();</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">class BaseRepo
{
    private $conn;

    public function __construct(PDO $conn) {
        $this-&gt;conn = $conn;
    }

    // continued</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">    public function fetchByQuery($query)
    {
        $stmt = $this-&gt;conn-&gt;prepare($query);

        $stmt-&gt;execute();

        return $stmt-&gt;fetch();
    }
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">class UserRepo extends BaseRepo {

    public function findByPk($key) {
        $safe_key = intval($key);

        return $this-&gt;fetchByQuery(
            "SELECT * FROM users
              WHERE id = {$safe_key}"
        );
    }</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">    // continued
    public function findAll()
    {
        return $this-&gt;fetchByQuery(
            "SELECT * FROM users"
        );
    }
}</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">$repo = new UserRepo($db_from_somewhere);

// grab all the users
$all_users = $repo-&gt;findAll();

// grabbing the user with pk = 3
$user_no_3 = $repo-&gt;findByPk(3);</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way (cont'd)</h2>
<pre><code class="language-php">// grabbing the first 10 teenage users
// organized by age (old -&gt; young)
$teenagers = $repo-&gt;fetchByQuery(
    "SELECT * FROM users
        WHERE age BETWEEN 13 AND 19
        ORDER BY age DESC LIMIT 10"
);</code></pre></article>
            <article class="slide"><h2>Things to think about</h2>
<ul>
    <li class="slide">
        <h5>
            SQL injection
        </h5>
    </li>
    <li class="slide">
        <h5>
            Multiple joins
        </h5>
    </li>
    <li class="slide">
        <h5>
            Chunking
        </h5>
    </li>
    <li class="slide">
        <h5>
            Different DB engines
        </h5>
    </li>
    <li class="slide">
        <h5>Different data types</h5>
        <ul>
            <li><code>json</code> in pgsql</li>
            <li><code>datetime</code>s as Date objects</li>
        </ul>
    </li>
</ul>


</article>
            <article class="slide"><h2>Basic routing</h2></article>
            <article class="slide"><h2>The Laravel way</h2>
<pre><code class="language-php">Route::get('/blog', function() {
    // do blog stuff
});

// or

Route::get("/blog", "BlogController@showBlog");</code></pre></article>
            <article class="slide"><h2>The Laravel way (cont'd)</h2>
<pre><code class="language-php">// different request methods

Route::get("/blog/post/{id}", function ($id) {
    // show that post
});

Route::delete("/blog/post/{id}", function ($id) {
    // delete that post
});</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-bash">+-- about
   |   +-- index.php
   +-- blog
       +-- index.php
       +-- post
           +-- index.php</code></pre></article>
            <article class="slide"><h2>The vanilla PHP way</h2>
<pre><code class="language-php">switch (strtoupper($_SERVER["REQUEST_METHOD")) {
    "GET":
        // show the post
        break;
    "DELETE":
        // do delete stuff
        break;
    default:
        // show a 404
}</code></pre></article>
    
            <p class="deck-status" aria-role="status">
                <span class="deck-status-current"></span>
                /
                <span class="deck-status-total"></span>
            </p>
        </div>

        <script src="js/dist.js"></script>
    </body>
</html>
